<AddTransactionScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 20
        
        # Header with back button
        BoxLayout:
            size_hint_y: 0.1
            Button:
                text: '← Back'
                size_hint_x: 0.3
                background_color: 0.8, 0.8, 0.8, 1
                on_press: root.go_back()
                
            Label:
                text: 'Add Transaction'
                font_size: '20sp'
                bold: True
                
            Widget:  # Spacer
                size_hint_x: 0.3
        
        # Transaction Type Toggle
        BoxLayout:
            size_hint_y: 0.1
            ToggleButton:
                text: 'Income'
                group: 'transaction_type'
                state: 'normal'
                on_press: root.set_transaction_type('income')
                background_color: (0.3, 0.7, 0.3, 1) if self.state == 'down' else (0.8, 0.8, 0.8, 1)
                
            ToggleButton:
                text: 'Expense'
                group: 'transaction_type'
                state: 'down'
                on_press: root.set_transaction_type('expense')
                background_color: (0.9, 0.3, 0.3, 1) if self.state == 'down' else (0.8, 0.8, 0.8, 1)
        
        # Amount Input
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 0.15
            spacing: 5
            
            Label:
                text: 'Amount (₹)'
                size_hint_y: 0.4
                font_size: '16sp'
                
            TextInput:
                id: amount_input
                input_filter: 'float'
                multiline: False
                font_size: '24sp'
                size_hint_y: 0.6
                padding: [10, 10]
        
        # Category Dropdown
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 0.15
            spacing: 5
            
            Label:
                text: 'Category'
                size_hint_y: 0.4
                font_size: '16sp'
                
            Spinner:
                id: category_spinner
                text: 'Select Category'
                values: []
                size_hint_y: 0.6
                size_hint_x: 1
                background_color: 0.9, 0.9, 0.9, 1
                color: 0, 0, 0, 1
        
        # Description Input
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 0.25
            spacing: 5
            
            Label:
                text: 'Description (Optional)'
                size_hint_y: 0.3
                font_size: '16sp'
                
            TextInput:
                id: description_input
                multiline: True
                size_hint_y: 0.7
                padding: [10, 10]
        
        # Save Button
        Button:
            text: 'Save Transaction'
            size_hint_y: 0.1
            background_color: 0.2, 0.6, 0.8, 1
            on_press: root.save_transaction()
            font_size: '18sp'
